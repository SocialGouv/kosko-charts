// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`should return create an job 1`] = `
Array [
  Object {
    "apiVersion": "batch/v1",
    "kind": "Job",
    "metadata": Object {
      "annotations": Object {
        "app.gitlab.com/app": "socialgouv-sample",
        "app.gitlab.com/env": "my-test",
        "kapp.k14s.io/update-strategy": "skip",
      },
      "labels": Object {
        "application": "www",
        "owner": "my-team",
        "team": "my-team",
      },
      "name": "create-db-job-my-test-branch-4gss4k",
      "namespace": "sample-42-my-test",
    },
    "spec": Object {
      "backoffLimit": 5,
      "template": Object {
        "spec": Object {
          "containers": Array [
            Object {
              "command": Array [
                "create-db-user",
              ],
              "env": Array [
                Object {
                  "name": "NEW_DB_NAME",
                  "value": "autodevops_my-test-branch",
                },
                Object {
                  "name": "NEW_USER",
                  "value": "user_my-test-branch",
                },
                Object {
                  "name": "NEW_PASSWORD",
                  "value": "b882754016399d053be945a896564f38",
                },
                Object {
                  "name": "NEW_DB_EXTENSIONS",
                  "value": "hstore pgcrypto citext uuid-ossp",
                },
              ],
              "envFrom": Array [
                Object {
                  "secretRef": Object {
                    "name": "azure-pg-admin-user",
                  },
                },
              ],
              "image": "ghcr.io/socialgouv/docker/azure-db:6.56.1",
              "imagePullPolicy": "IfNotPresent",
              "name": "create-db-user",
              "resources": Object {
                "limits": Object {
                  "cpu": "300m",
                  "memory": "256Mi",
                },
                "requests": Object {
                  "cpu": "100m",
                  "memory": "64Mi",
                },
              },
            },
          ],
          "restartPolicy": "Never",
        },
      },
      "ttlSecondsAfterFinished": 86400,
    },
  },
  Object {
    "apiVersion": "bitnami.com/v1alpha1",
    "kind": "SealedSecret",
    "metadata": Object {
      "annotations": Object {
        "sealedsecrets.bitnami.com/cluster-wide": "true",
      },
      "name": "azure-pg-user-my-test-branch",
      "namespace": "sample-42-my-test",
    },
    "spec": Object {
      "encryptedData": Object {
        "database": "AgDOZ4O0a8BNj9jjvNhqXgJrdtJZVJthvqEiGYVyxweM5lLCovGa6daGITwwxeAfgg4umuLfYQWnamEMC+FLsBNWo4LZfXDuASkAnyM3JtVoNY5slDqDWBaNpklCjU1CL5llUqKuazquN0PJQZqJmaWA7nWIVKJFaner1lZ7GZs1BdpV1U3MQENVwKNIgkYK//9lVzuASgzA5OQH7xah878QhUzI8hOAQ03Nt0Nz9eg3jP6zkhBEYT+WP3ma0Kvnm2yyWDaAh4LHRchD7lyOLNjL5hBMsVKNupW/WaGDkpBNzXkC9p3u/MKfWDYrXzfQrKSSGIG49l/isPXGZbXlMMS6O110rPS92l8iymp5Rr6Tb9uUaBATICHa5Z7q877D/O7lpqzOtuQQ6R8IJLd8pedKpbxgXnz4MjnW9U9POUXxMS/QhZAoyjJnsRPctk3jW67Fj1lc4JTbu3T1jlf0fKYNB8fuCuBpBofHEPeEtbvdCgdlMRBmrBJvXWlZP/WFVZ6F3GsvyXYkxYs7SvMJyva8sohH9kKffbmaDH2phUg/hm5nddI21FEypSIsoAvF0HZbouxMgwGN4OozvXjOmNQLgO2drXUFLE9s7BEfRZnkpyWJfpICN7BVo9tEYgmrnuaR3cxXACKh5Up4I1zTDmlqJgxDlmQi2gJPF00xnveWhgJEJq7xBFQ6XMrFDvu0hdDtwgZziy/yjom7MKWS0QCAY3OML+r63eoA",
        "host": "AgCcJoHjGZ+hY74KtUqnAqLf7b/C9mpRWpTZf6S7fGP+vcfsuHHzgV/89sxXwUMHpK0gam/yazbGNRpWWgn/VzwMof4VOzJ4Irxc4FrtS4YarGS6/XCh0FalKVEGynEETtkRcb0KgBRNlGc+fukZzGg/tdIgxEXODIDLF6BB8mx04obe3Hichi1RCMGOmtVLQMibJBpeDKcGdfLcD1fOF72yGG57xmOyaUP/exgrXsxUEnOFqS175SlVDkJKqDqbJTBA8RnEgM7LmNLm/egfSSPhT2goztT2hmkz6xNWw/O9fWW+y3nyTXBY9GvMBl2A4OUddf0v1H+axeLCKl2NxA8LtWMPAwCWr31hFljdA2H1VSLFKdYqdnajKRQDCgB9ItOpJkp2Xtt9xNEebit3rXz5fO5jjVMfQJRKp5k/Ud+wy/yqPkQk9KVqrxvQ9gH3pPR8OKZQsk6yL4+jb4oCOxWMOrP/UhdA5snoaz8eFq3wpFiqrR+n7qZBT4uEFCbviZ8xUJ3T7OESxHaf5uyl2uSv3HGx7oX5HO1m9joCVPDyLpghtC6PYKM5N8liuuXXYR6VCUXoRN1O5y+Gv16YLdlP/iGVuWRZfy7OlT3xMQr8Aj0ttn/Pfy4lcrf/TwLY7kIyrERA4/WE14IXfmbDjBbxLYR6ozRg0DQSzEA5XKVGzhjhNPExJVoMoidKShAhZ4X5vObkyanjM/UStYkuXM5E2BDSxE7UfozRT1hXzXxQKbXCYzSe/UZ92K6Y",
        "password": "AgCr01VSsTz40DYWwmfZeBynjmLGkwWbsv0G2AiZsDpu9lJMQN2AIhWZ5BsDwxMRuW7/mcjSW6YJ4RbfNgA4famoYA+AjOtfLRpInrPDf7bMSpconYeTA20bBb8lyXPwiCa3eU4/5eRwIeJqLTmbJv/vMyMaRfZgQBX1X14q+AJDgU+kAYsKW6D9zNNAA9XOWwWqJUJh7Td2g3BcmUZeqfXRIPFznB3gQf7FQKlYfzHHDdKjIOXvIDGJDrfBfhq0I+9k1/I0GgWbMj3Nf3TzBjgnaXDMhBSyA5FubF+1e2mm0MOuwDHBuYvmpglu3+n7ZVcqVSGYw3ikwF3WQK/BIQjGHF/lNKOidpzwiNXadaqQlr/EuV/i1e8lbU44bUlkxnl0EKvsf+eDKxF/Ay1TqLyUbz7eSRHNFfjSzfVoaluRFJPndUrvUsgaCrkPl44k8l1qoqR67RjjWAUT/ogTz2bZYXdgcsCReuMPkHLb+Xo0S6PvbkQDpbx+7IJxWZUu8vWkRZgXTVN2rtAmegH6XaebWCDYpUQRJEXW3ddZ3t6yRQRRFhTZRjbqLC9HXaYg8pJQZrcwJq7Ceiuhw++G5Ebij0D0sG61fCltHYbQk/x0unkzn2pWwi7IK9Hw/0jxKC/Ldrhv5CunfexyqewWdeFN4vUbrclIP9f/XIzqmsYzX2U4S2krS8Au1lXHP+hsh/R2SUKzT/dIBZvQHJraHDXnRgo4jq/7/+DHMMJ/I2hsAg==",
        "user": "AgA6lK+ul36a9Xv81BRuJUNqIVDJ5evkX5hxHkHDeW3NHKvcwHrc1hfSilojkME2r5e9W/YvkNpZoxF/pLd/eERYFcsPlcdFamyujKzrsA27hbkKSviLCOHLCGjU23UVgYFe/nV3q/Op+L7pDGmx0OhU/8QQAscKg2U+PTHGZWCLp1zBbBLYlj5MuZgIFRKDEolv/7qco94f59HROyg5fD9s52dLg984sHgzMbaItlYC0T7NaTbNcH7S0n7oMSqm942gEn7LUdSIelkkioYGrl2jRMkupkJFRBow2MUyNigOiPMQGLY+w+Ibw+g24pxx/T+j7aQD2G4fRGC9nHlK7LrpHJzrwqAM9uU3dcEC80C5z1BChPWN/Q4r9LI9plrVO8SmzacoQ76UEZ4sw9fQNIh3QDVsapQknlXl6C/i9pFYe5PVKtfnLsRySTNmhWdh/06vc4LtXK7FVNQl81pfhvxuj/GNdNnfyuGmSYZZTDpVXhcjd3X832A+XjgtA/VXlMph7eXArZtN5Q8LtVdqadsqstppPUlrQTlE72/zi3C9yDTFuUxe5NmOzl7lQ6Vgv3c3rQ6DE+qXz3mN+58o+evjRpI6b64IJ5iIs4pR89Xi9asQGfk7n/fB2OVe+7Fvvtk7JFL2kYEpMUm7b0R5QLMfdhV+4G/cMx24n+4CyHH9RYMkl8GoC+QA5UJAK98Ux8hwVeFGcMLS4lAzuK6jX+v84til",
      },
      "template": Object {
        "metadata": Object {
          "annotations": Object {
            "sealedsecrets.bitnami.com/cluster-wide": "true",
          },
          "name": "azure-pg-user-my-test-branch",
        },
        "type": "Opaque",
      },
    },
  },
]
`;

exports[`should use custom pgHost 1`] = `
Array [
  Object {
    "apiVersion": "batch/v1",
    "kind": "Job",
    "metadata": Object {
      "annotations": Object {
        "app.gitlab.com/app": "socialgouv-sample",
        "app.gitlab.com/env": "my-test",
        "kapp.k14s.io/update-strategy": "skip",
      },
      "labels": Object {
        "application": "www",
        "owner": "my-team",
        "team": "my-team",
      },
      "name": "create-db-job-my-test-branch-4gss4k",
      "namespace": "sample-42-my-test",
    },
    "spec": Object {
      "backoffLimit": 5,
      "template": Object {
        "spec": Object {
          "containers": Array [
            Object {
              "command": Array [
                "create-db-user",
              ],
              "env": Array [
                Object {
                  "name": "NEW_DB_NAME",
                  "value": "autodevops_my-test-branch",
                },
                Object {
                  "name": "NEW_USER",
                  "value": "user_my-test-branch",
                },
                Object {
                  "name": "NEW_PASSWORD",
                  "value": "b882754016399d053be945a896564f38",
                },
                Object {
                  "name": "NEW_DB_EXTENSIONS",
                  "value": "hstore pgcrypto citext uuid-ossp",
                },
              ],
              "envFrom": Array [
                Object {
                  "secretRef": Object {
                    "name": "azure-pg-admin-user",
                  },
                },
              ],
              "image": "ghcr.io/socialgouv/docker/azure-db:6.56.1",
              "imagePullPolicy": "IfNotPresent",
              "name": "create-db-user",
              "resources": Object {
                "limits": Object {
                  "cpu": "300m",
                  "memory": "256Mi",
                },
                "requests": Object {
                  "cpu": "100m",
                  "memory": "64Mi",
                },
              },
            },
          ],
          "restartPolicy": "Never",
        },
      },
      "ttlSecondsAfterFinished": 86400,
    },
  },
  Object {
    "apiVersion": "bitnami.com/v1alpha1",
    "kind": "SealedSecret",
    "metadata": Object {
      "annotations": Object {
        "sealedsecrets.bitnami.com/cluster-wide": "true",
      },
      "name": "azure-pg-user-my-test-branch",
      "namespace": "sample-42-my-test",
    },
    "spec": Object {
      "encryptedData": Object {
        "database": "AgBAMgVSiOM1b/vH8VyneBsIETfu06WuAfKMKSYtv/p5g/Dr61EMcVOZTHuzEm76pgqwCcc1/I1gHkNZrZPn941sGvqAEsidGfuNcMSC+xgrrvKWRojf8qTGsJku1FLoJx2dtnnQm0prvgRUxCFgudz9wpI5PUf/z1SMJWu7lg9TGzVHOjEtW1yvUKe73lXZCPgHpa/oieyODLhLivgEA1g4HWRpQOdCVlXQOKkg0yvluV4tIAHOTUSKfBhNBdI+c1FE245wGCUSd+BNPZikQfcsvrgq0rMxtgFeOtf7r1CU6z5eKpqOpxJoS703xDZRN3fEmx/a1T9ow3k4APyZL1f2mosMyVWAi6fRxw2r8L6ad5vgwDRMW39mpsoU4VefX4uDdRj6Y7u+z7zKZTk3Dvnnb9oT29bZkD3tVNtNNLIq8C3YKL+SXMnEvOBNf5CrqVD2RhXkjEOcbdIcSvuvsZBlzYJk5k2h3UFDE+xZ1I6CR48GvVVlXYU5gz/EgC5NPmtDAoX1qhoebAHXwV+BLqkvvZ7pFbA9CPOSpGz6ULiQD3k9zUMgw4rY8GjyMA/ED8JGT0inesAdV9Yk9usYocSJK5X2C42Cqve9yh4rbQa5cWUUEwFB5fAN1iXTaHT52CYXby3att31wZ7jYCLsD78mW3Z+w5aVh9r1WG9611rjtZ0S+a7vp2zmWPumfpKEB2MwA67NyizcbWo522zMzLDAYCDhwt6zcTRr",
        "host": "AgCAacU6g1TimUCGXfoJW2DA8ByLw8VuKqHdzhhC0Yx8xCg6VNh8xaXQWVkpyAJPQtkwaS/I8NhuQRONSf5enbhhF95MqX5chys2UAntWyW8nzNEkLYeRQ2mA9sTfRTU+DX1wq2PbZ87SEwbBplpWwtb/3MhAynclIvDbICFLxf78JcjctMTCDG0WjbcrtT6GU3jRdeV/tj5spMQJtvMIxeP/IIrob5RCRv18iaWsvPBqxPMIsP8XLQ/7xJY0wxP/YXh0hjlJq/3Xi3JoVJSHX8Zuq/eb4tf4sG0hzphXHvd2tueNBGArdFCJlxLNUffQRrGRCINExuLateDyWUtA/jKEZVMEZj2uPhKio6Gv1b66khEe1BKvdzXaQCOivwtawwna3IAmeaq4bVIWWtCexgdmJm4Pz6ikIsw/B5ALVn/n3dlH5fhRUA4lfmzfraJa/OlR2kdCcLtDj+vI8nCIsSyKS7Fv/Nz9RDO7Sr1xXYQ13pjcqAQlwbpYJKjUtVHxG/Y6H4Pe3w3UlFTpMzsjbse1elZcyooB3HpR/AYcNYxXkPKcsH2yxjM+5e30zmRVU/LX5i5CcwXF6snVrfi0iUUZVb14whuH6Ss05IKgJXoFQRmHGYKdQsedHx9ukAirKGoVasoM7ZeneuXJ4cpYubnWEbbeZh9F60rZ+Jklx14O7di8F2VN5tTYbr/rQX6r7MZ9ffmBJTVHGB3eG2E/g==",
        "password": "AgBD0L/cCSE8gGfSLPwT3sQsU3ukzern0geNZkfbwK9pyDwKCAI5ekkwKLlrZEqWfhBAKAx5+L9ZQhcvpTzpt+vzQb0N91Q7VjXWUDwAFagACNNLH+G2t/actdPfUxxoC7wOTmfPTMCC7hiW6ki9DHsYZa3dOafUph8TMIpke+zpP8o9229Bi1zWEMOkX/iawTbyszqQAEn1bukVIOWiFKmepOhpteWRegWU0LMo2bcuB8Tmh7DutamfsP+PN/lqwe/YAy+Cd+PDbuZIuMVTiYTS9HhKClW3Gm3WFuz2P0WGriVQLaSNA0G2GSC3eRd5E98m530iixcoDXmVCQCIIG0/VowOrBLvNhjGRgH/7OP59fmCurx/2Egjz7MtSQW2hgCwe1Qzy5+JzO804bMua/F3RBJorJKrG9f4m/VY2HAOMqZXn8JYkk/vsHCrN3bjfoDzL6PbsyzlJepfef+SK8vTsAOv8nvoQBpMGp/Z77SJJvJ29svw58cQxMe0pPhRoaK0SxlVlL0/LSX9nKPvIBoILw0VVWIb8t3Ageen56p3Qn+wf1gDU0YJt8Qikc6SamTEo5dC/FpirNFfs9YCyyFvIUWY+z0QlNOLyxkm6jmp0LKtV77p2Ejqsd2eejxq0lU7HpCxLteGYeYw3HfbUAm+9e0ihMEjAInatqFJ9ttMYW1dTtJv7WoTfHTe8MFjbEg/7RURSFdtd9ppjs28G4UdONhiJrU18uBGUFJHO2Em3Q==",
        "user": "AgAeMAdv3HTbkvClAnbAHUlO0k0JdTppdSZpD31qx9nVnMsuAAT5GOYNpkR4DyfR3NPfI8RtcSnDIrKC3jSC0LyA7lBkenNwj99S5lTShQAWqjcZTjBeYlUGhu85inbseBDFJfRJ6JvZJDlW4GJSw9fqNPUTq0++8+JQK0ApyfjPYIqLKqB6Lhc6XhTSMBxwuEpTPFXeeuGGQDGfk/J4jRkRiQgbIYNpfHbE8D/Pz6Nj15ZTs/aJcfQ9nhpR1rCl7QdgqDHH5Euu/ndEHA3Z9KeP4wy/TlUpGJyQnbR41nnFTLT6Y343FvxEjSH9Q5TsBSZMagCCTV0JQ4fUi2TtbfVZ12DZmJY2xJUMZqh5kelpLvTorR2LHZYfRH6unu1GvLjhl8eMaKRkKdYrJ6PoR9CCCxzr5ZMoyntE1q8oIgHENsGmpIYQG6AFJzl16oaBcdmmwtfJU+EJG18meTsawT3d2F7dDEeK6/nSHL1414jH0/RXPiWiydyqDsSNiu/jEZeIwuKbLXrDdpqInHmXYeHnxMT81HL6fCwrerXJeFcbIs2SjifatnsbH7haoGCBf9GSPSGB/dGpPJmHyVZzpuPP3nNO1g9kupT1ni9QHfqLESz8M3xt4T4+K36UteSDyg7/PUv1R6qeAdSMfVCn4ffsAX1DyUduykCgijiB4VmhnWZGeilQnWGgslXO+njDM7sX7l+ZC8DOtfREstJ4Ajd8scL5",
      },
      "template": Object {
        "metadata": Object {
          "annotations": Object {
            "sealedsecrets.bitnami.com/cluster-wide": "true",
          },
          "name": "azure-pg-user-my-test-branch",
        },
        "type": "Opaque",
      },
    },
  },
]
`;
