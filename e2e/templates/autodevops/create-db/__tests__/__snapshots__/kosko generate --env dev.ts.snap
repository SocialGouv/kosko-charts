// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`create DB from github : kosko generate jobs/create-db --env dev 1`] = `
"apiVersion: batch/v1
kind: Job
spec:
  backoffLimit: 5
  template:
    metadata:
      annotations:
        kapp.k14s.io/deploy-logs: for-new
    spec:
      containers:
        - command:
            - create-db-user
          env:
            - name: NEW_DB_NAME
              value: sample-kosko-e2e-branch
            - name: NEW_USER
              value: sample-kosko-e2e-branch
            - name: NEW_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: PGPASSWORD
                  name: pgpassword
            - name: NEW_DB_EXTENSIONS
              value: hstore pgcrypto citext uuid-ossp
          envFrom:
            - secretRef:
                name: azure-pg-admin-user
          image: ghcr.io/socialgouv/docker/azure-db:6.63.0
          imagePullPolicy: IfNotPresent
          name: create-db-user
          resources:
            limits:
              cpu: 300m
              memory: 256Mi
            requests:
              cpu: 100m
              memory: 64Mi
      restartPolicy: Never
  ttlSecondsAfterFinished: 86400"
`;

exports[`create DB from gitlab : kosko generate jobs/create-db --env dev 1`] = `
"apiVersion: batch/v1
kind: Job
spec:
  backoffLimit: 5
  template:
    metadata:
      annotations:
        kapp.k14s.io/deploy-logs: for-new
    spec:
      containers:
        - command:
            - create-db-user
          env:
            - name: NEW_DB_NAME
              value: sample-kosko-e2e-branch
            - name: NEW_USER
              value: sample-kosko-e2e-branch
            - name: NEW_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: PGPASSWORD
                  name: pgpassword
            - name: NEW_DB_EXTENSIONS
              value: hstore pgcrypto citext uuid-ossp
          envFrom:
            - secretRef:
                name: azure-pg-admin-user
          image: ghcr.io/socialgouv/docker/azure-db:6.63.0
          imagePullPolicy: IfNotPresent
          name: create-db-user
          resources:
            limits:
              cpu: 300m
              memory: 256Mi
            requests:
              cpu: 100m
              memory: 64Mi
      restartPolicy: Never
  ttlSecondsAfterFinished: 86400"
`;
